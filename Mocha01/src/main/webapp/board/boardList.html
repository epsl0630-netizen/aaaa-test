<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
  <link rel="icon" href="favicon.ico"/>
  <link rel="stylesheet" href="../css/main.css" />
  <script src="../js/main.js"></script>
  
</head>
<body>
  <table id="wrap">
    <tr>
      <!-- header -->
      <td colspan="3" id="header">
        <a href="../home/index.html" class="m-logo"></a>
        <!-- headerlist start -->
        <div id="header-list">
            <div id="search-container"> 
              <input id="search" type="text" placeholder="검색어를 입력하세요."/>
              <button id="search-btn">
                <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#1f1f1f"><path d="M784-120 532-372q-30 24-69 38t-83 14q-109 0-184.5-75.5T120-580q0-109 75.5-184.5T380-840q109 0 184.5 75.5T640-580q0 44-14 83t-38 69l252 252-56 56ZM380-400q75 0 127.5-52.5T560-580q0-75-52.5-127.5T380-760q-75 0-127.5 52.5T200-580q0 75 52.5 127.5T380-400Z"/>
                </svg>
              </button>
            </div>
            <div id="header-profile">
              <a href="../home/login.html"><img class="profile-img-sm" src="../img/profile.png"></a>
            </div>
          </div>
        </div>
        <!-- headerlist end --> 
      </td>
      <!-- header -->
    </tr>
    <tr>
      <!-- nav start -->
      <td id="nav">
        <ul>
          <li>
            <a href="#" class="nav-btn">
              <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px">
                <path d="M120-240v-80h720v80H120Zm0-200v-80h720v80H120Zm0-200v-80h720v80H120Z"/>
              </svg>
            </a>
            <input type="button" id="nav-menu-btn">
          </li>
          <li>
            <a href="../home/index.html" class="nav-btn">
              <div class="nav-icon">
                <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"><path d="M240-200h120v-240h240v240h120v-360L480-740 240-560v360Zm-80 80v-480l320-240 320 240v480H520v-240h-80v240H160Zm320-350Z"/></svg>
              </div>
              홈
            </a>
          </li>
          <li>
            <a href="../approval/approvalList.html" class="nav-btn">
              <div class="nav-icon">
                <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"><path d="M240-360h280l80-80H240v80Zm0-160h240v-80H240v80Zm-80-160v400h280l-80 80H80v-560h800v120h-80v-40H160Zm756 212q5 5 5 11t-5 11l-36 36-70-70 36-36q5-5 11-5t11 5l48 48ZM520-120v-70l266-266 70 70-266 266h-70ZM160-680v400-400Z"/></svg>
              </div>
              결재
            </a>
          </li>
          <li>
            <a href="../report/reportList.html" class="nav-btn">
              <div class="nav-icon">
                <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"><path d="m200-120-80-480h720l-80 480H200Zm67-80h426l51-320H216l51 320Zm133-160h160q17 0 28.5-11.5T600-400q0-17-11.5-28.5T560-440H400q-17 0-28.5 11.5T360-400q0 17 11.5 28.5T400-360ZM240-640q-17 0-28.5-11.5T200-680q0-17 11.5-28.5T240-720h480q17 0 28.5 11.5T760-680q0 17-11.5 28.5T720-640H240Zm80-120q-17 0-28.5-11.5T280-800q0-17 11.5-28.5T320-840h320q17 0 28.5 11.5T680-800q0 17-11.5 28.5T640-760H320Zm-53 560h426-426Z"/></svg>
              </div> 
              문서
            </a>
          </li>
          <li>
            <a href="../schedule/scheduleList.html" class="nav-btn">
              <div class="nav-icon">
                <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"><path d="M200-80q-33 0-56.5-23.5T120-160v-560q0-33 23.5-56.5T200-800h40v-80h80v80h320v-80h80v80h40q33 0 56.5 23.5T840-720v560q0 33-23.5 56.5T760-80H200Zm0-80h560v-400H200v400Zm0-480h560v-80H200v80Zm0 0v-80 80Zm280 240q-17 0-28.5-11.5T440-440q0-17 11.5-28.5T480-480q17 0 28.5 11.5T520-440q0 17-11.5 28.5T480-400Zm-160 0q-17 0-28.5-11.5T280-440q0-17 11.5-28.5T320-480q17 0 28.5 11.5T360-440q0 17-11.5 28.5T320-400Zm320 0q-17 0-28.5-11.5T600-440q0-17 11.5-28.5T640-480q17 0 28.5 11.5T680-440q0 17-11.5 28.5T640-400ZM480-240q-17 0-28.5-11.5T440-280q0-17 11.5-28.5T480-320q17 0 28.5 11.5T520-280q0 17-11.5 28.5T480-240Zm-160 0q-17 0-28.5-11.5T280-280q0-17 11.5-28.5T320-320q17 0 28.5 11.5T360-280q0 17-11.5 28.5T320-240Zm320 0q-17 0-28.5-11.5T600-280q0-17 11.5-28.5T640-320q17 0 28.5 11.5T680-280q0 17-11.5 28.5T640-240Z"/></svg>
              </div>
              일정
            </a>
          </li>
          <li>
            <a href="../board/boardList.html" class="nav-btn">
              <div class="nav-icon">
                <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"><path d="M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h168q13-36 43.5-58t68.5-22q38 0 68.5 22t43.5 58h168q33 0 56.5 23.5T840-760v560q0 33-23.5 56.5T760-120H200Zm0-80h560v-560H200v560Zm80-80h280v-80H280v80Zm0-160h400v-80H280v80Zm0-160h400v-80H280v80Zm200-190q13 0 21.5-8.5T510-820q0-13-8.5-21.5T480-850q-13 0-21.5 8.5T450-820q0 13 8.5 21.5T480-790ZM200-200v-560 560Z"/></svg>
              </div>
              게시판
            </a>
          </li>
          <li>
            <a href="../admin/admin.html" class="nav-btn">
              <div class="nav-icon admin">
                <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"><path d="M400-480q-66 0-113-47t-47-113q0-66 47-113t113-47q66 0 113 47t47 113q0 66-47 113t-113 47ZM80-160v-112q0-33 17-62t47-44q51-26 115-44t141-18h14q6 0 12 2-8 18-13.5 37.5T404-360h-4q-71 0-127.5 18T180-306q-9 5-14.5 14t-5.5 20v32h252q6 21 16 41.5t22 38.5H80Zm560 40-12-60q-12-5-22.5-10.5T584-204l-58 18-40-68 46-40q-2-14-2-26t2-26l-46-40 40-68 58 18q11-8 21.5-13.5T628-460l12-60h80l12 60q12 5 22.5 11t21.5 15l58-20 40 70-46 40q2 12 2 25t-2 25l46 40-40 68-58-18q-11 8-21.5 13.5T732-180l-12 60h-80Zm40-120q33 0 56.5-23.5T760-320q0-33-23.5-56.5T680-400q-33 0-56.5 23.5T600-320q0 33 23.5 56.5T680-240ZM400-560q33 0 56.5-23.5T480-640q0-33-23.5-56.5T400-720q-33 0-56.5 23.5T320-640q0 33 23.5 56.5T400-560Zm0-80Zm12 400Z"/></svg>
              </div>
              관리자
            </a>
          </li>
        </ul>
      </td>
      <!-- nav end -->
      <!-- menu start -->
      <td id="menu">
        <div>
          <span class="menu-title">게시판 관리</span>
          <ul>
            <li><a href="#" class="text-white" id="lnk-board-notice">전자 공지</a></li>
            <li><a href="#" class="text-white" id="lnk-board-free">자유 게시판</a></li>
          </ul>
        </div>
      </td>
      <!-- menu end -->
      <!-- section start -->
      <td id="section">
        <table  class="container">
          <tr>
            <td>
                <h2 id="board-title" class="h5 mb-1">자유 게시판</h2>
                <div  id="board-subtitle"class="text-muted mb-3">자유롭게 소통하고 정보를 공유하세요</div>
                <!-- 상단 탭 느낌(스케치 맞춤) -->
                <div class="btn-group mb-2">
                  <button type="button" class="btn btn-outline-secondary btn-sm active">게시판 등록</button>
                </div>

                <!-- 총 건수 -->
                <div class="mb-2 small">
                  총 <span id="board-total">0</span>개의 게시물
                </div>

                <!-- 리스트 테이블 -->
                <div class="table-responsive">
                  <table class="table align-middle table-sm" id="board-table">
                    <thead class="table-light">
                      <tr>
                        <th style="width:80px;">번호</th>
                        <th>제목</th>
                        <th style="width:140px;">작성자</th>
                        <th style="width:160px;">작성일</th>
                        <th style="width:100px;">조회수</th>
                      </tr>
                    </thead>
                    <tbody></tbody>
                  </table>
                </div>

                <!-- 페이징 + 검색 -->
                <div class="d-flex justify-content-between align-items-center mt-2">
                  <!-- 페이징 -->
                  <nav aria-label="pagination">
                    <ul id="board-paging" class="pagination pagination-sm my-0"></ul>
                  </nav>

                  <!-- 검색 -->
                  <form id="board-search" class="d-flex gap-2" role="search">
                    <select class="form-select form-select-sm" id="searchType" style="width:110px;">
                      <option value="title" selected>제목</option>
                      <option value="writer">작성자</option>
                    </select>
                    <input class="form-control form-control-sm" id="keyword" type="search" placeholder="검색어">
                    <button class="btn btn-outline-secondary btn-sm" type="submit" title="검색">
                      <span class="material-symbols-outlined" style="font-size:18px;vertical-align:middle;">search</span>
                    </button>
                  </form>
                </div>
              </div>
            </div>              
            </td>
          </tr>
        </table>
      </td>
      <!-- section end -->
    </tr>
    <tr>
      <td colspan="3" id="footer">
        Copyright © Mocha company
      </td>
    </tr>
  </table>

   <script>
  // 게시판 화면 참조
  const pageBoard = document.getElementById('page-board');

  /*
  // 1) 왼쪽 "게시판" 클릭 시 게시판 페이지 보여주기
  document.getElementById('nav-board').addEventListener('click', (e)=>{
    e.preventDefault();
    // 섹션 안의 다른 화면이 있다면 숨기고 게시판만 표시
    document.querySelectorAll('#section .container > div').forEach(v => v.classList.add('d-none'));
    pageBoard.classList.remove('d-none');
    renderBoard(); // 최초 렌더
  });
  */

const FREE_TITLES = [
  "오늘 뭐 먹지?", "동호회 모집", "여행 같이 가실 분",
  "중고거래 팁 공유", "자취 꿀팁", "취미 추천 받습니다",
  "잡담: 요즘 날씨", "헬스 초기 루틴 공유", "맛집 추천", "개발 질문 있어요"
];

const NOTICE_TITLES = [
  "정기 점검 안내", "회의 일정 공지", "휴무일 공지",
  "보안 정책 변경", "사내 교육 안내", "연말정산 제출 안내",
  "전산 시스템 점검", "사내 행사 공지", "규정 개정 안내", "긴급 공지"
];

  // 2) 더미 데이터 (API 연동 시 교체)
  const BOARD_DATA = [
  // 자유게시판
  {id:3, title:'오늘의 점심 메뉴', comments:100, writer:'abcd',  date:'2025-09-19', views:100, board:'free'},
  {id:2, title:'월세 아끼는 법',   comments:68,  writer:'준준',  date:'2025-09-18', views:68,  board:'free'},
  {id:1, title:'배고파',          comments:50,  writer:'김김',  date:'2025-09-17', views:50,  board:'free'},

  // 전자 공지
  {id:33, title:'공지 테스트',      comments:0,   writer:'인사관리', date:'2025-09-19', views:4,   board:'notice'},
  {id:32, title:'참가 서약 양식',   comments:2,   writer:'경영지원', date:'2025-09-19', views:7,   board:'notice'},
  {id:31, title:'연말 정산 안내',   comments:1,   writer:'인사관리', date:'2025-09-18', views:5,   board:'notice'},

 // 샘플(랜덤)
...Array.from({ length: 24 }, (_, i) => {
  const isFree = Math.random() < 0.6;  // 자유게시판 60% 비율
  return {
    id: 24 - i,
    title: isFree
      ? FREE_TITLES[Math.floor(Math.random() * FREE_TITLES.length)]
      : NOTICE_TITLES[Math.floor(Math.random() * NOTICE_TITLES.length)],
    comments: Math.floor(Math.random() * 20),
    writer: ['홍준', '유준', 'abcd', '관리자'][Math.floor(Math.random() * 4)],
    date: '2025-09-' + String(10 + Math.floor(Math.random() * 20)).padStart(2, '0'),
    views: 10 + Math.floor(Math.random() * 500),
    board: isFree ? 'free' : 'notice'
  };
})
];



  // 3) 상태
    const state = { 
      page:1, size:10, 
      searchType:'title', keyword:'', 
      currentBoard:'free'       // ← 현재 보드 타입
    };

    // 최신일자 내림차순
    const byDateDesc = (a,b) => new Date(b.date) - new Date(a.date);

 // 필터링 (보드타입 + 검색) + 정렬(최신순)
function getFiltered(){
  const {searchType, keyword, currentBoard} = state;
  const kw = keyword.trim().toLowerCase();

  return BOARD_DATA
    .filter(r => r.board === currentBoard)
    .filter(r => kw ? String(r[searchType]).toLowerCase().includes(kw) : true)
    .sort(byDateDesc);
}


 function renderBoard(){
  // 제목/부제 갱신
  const isFree   = state.currentBoard === 'free';
  const titleEl  = document.getElementById('board-title');
  const subEl    = document.getElementById('board-subtitle');
  titleEl.textContent = isFree ? '자유 게시판' : '전자 공지';
  subEl.textContent   = isFree ? '자유롭게 소통하고 정보를 공유하세요' : '회사 공지사항을 확인하세요';

  const rows = getFiltered();
  document.getElementById('board-total').textContent = rows.length;

  const totalPages = Math.max(1, Math.ceil(rows.length/state.size));
  state.page = Math.min(state.page, totalPages);

  const start = (state.page-1)*state.size;
  const pageRows = rows.slice(start, start+state.size);

  const tbody = document.querySelector('#board-table tbody');
  tbody.innerHTML = pageRows.map(r => `
    <tr>
      <td>${r.id}</td>
      <td>${r.title}${r.comments ? `<span class="cmt"> (${r.comments})</span>`:''}</td>
      <td>${r.writer}</td>
      <td>${r.date}</td>
      <td>${r.views}</td>
    </tr>
  `).join('');

  renderPaging(totalPages);
}

  // 6) 페이징 (‹ 1..10 › 윈도우)
  function renderPaging(pages){
    const ul = document.getElementById('board-paging');
    const cur = state.page;
    const windowSize = 10;
    const begin = Math.floor((cur-1)/windowSize)*windowSize + 1;
    const end = Math.min(begin + windowSize - 1, pages);

    const li = (label, page, disabled=false, active=false) => `
      <li class="page-item ${disabled?'disabled':''} ${active?'active':''}">
        <a class="page-link" href="#" data-page="${page}">${label}</a>
      </li>`;

    let html = '';
    html += li('‹', Math.max(1, cur-1), cur===1);
    for(let p=begin; p<=end; p++) html += li(String(p), p, false, p===cur);
    html += li('›', Math.min(pages, cur+1), cur===pages);

    ul.innerHTML = html;
    ul.querySelectorAll('a.page-link').forEach(a=>{
      a.addEventListener('click', (e)=>{
        e.preventDefault();
        state.page = Number(a.dataset.page);
        renderBoard();
      });
    });
  }

  // 7) 검색 이벤트
  document.getElementById('board-search').addEventListener('submit', (e)=>{
    e.preventDefault();
    state.searchType = document.getElementById('searchType').value;
    state.keyword    = document.getElementById('keyword').value;
    state.page = 1;
    renderBoard();
  });

  // (선택) 처음부터 게시판을 보여주고 싶으면 아래 두 줄 주석 해제
  //document.getElementById('nav-board').click();
</script>
<script>
  // ===== 게시판 드로어 열고/닫기 =====
  const drawer = document.getElementById('menu-board-drawer');

  function openBoardDrawer() {
    drawer.classList.add('show');
    drawer.setAttribute('aria-hidden','false');
    document.getElementById('btn-board-new')?.focus();
  }
  function closeBoardDrawer() {
    drawer.classList.remove('show');
    drawer.setAttribute('aria-hidden','true');
  }

  // 왼쪽 사이드바 "게시판" 클릭 → 드로어 열고, 본문은 자유게시판 표시
  /*
  document.getElementById('nav-board')?.addEventListener('click', (e)=>{
    e.preventDefault();
    openBoardDrawer();
    document.querySelectorAll('#section .container > div').forEach(v => v.classList.add('d-none'));
    document.getElementById('page-board').classList.remove('d-none');
    renderBoard();
  });
  */

  // 드로어 상단 "← 일정메뉴" 버튼 → 닫기
  document.getElementById('btn-board-back')?.addEventListener('click', (e)=>{
    e.preventDefault();
    closeBoardDrawer();
  });

  // ESC 로 닫기
  document.addEventListener('keydown', (e)=>{
    if (e.key === 'Escape' && drawer.classList.contains('show')) closeBoardDrawer();
  });

  // (선택) 드로어 내 항목 클릭 시 탭 동작 연결
  document.getElementById('lnk-board-notice')?.addEventListener('click', (e)=>{
    e.preventDefault();
    // TODO: 전자 공지 목록 렌더
    state.currentBoard = 'notice';
    state.page = 1;
    renderBoard();
  });
  document.getElementById('lnk-board-free')?.addEventListener('click', (e)=>{
    e.preventDefault();
    // 현재 자유게시판 목록 유지
    state.currentBoard = 'free';
    state.page = 1;
    renderBoard();
  });
</script>
<script>
  // 페이지 로드시 바로 목록 채우기
  document.addEventListener('DOMContentLoaded', () => {
    if (typeof renderBoard === 'function') renderBoard();
  });
</script>  
</body>
</html>
